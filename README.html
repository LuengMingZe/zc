<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å³ä¾§é¡µé¢ - å¤§å­¦ç”Ÿç»¿è‰²é•¿å¾</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
         }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background-color: #f5f5f5;
            color: #333;
            padding: 0;
        }
        
        .right-container {
            position: fixed;
            right: 0;
            top: 0;
            width: 320px;
            background-color: #fff;
            min-height: 100vh;
            padding: 20px 0;
            box-shadow: 0 0 8px rgba(0,0,0,0.05);
        }
        
        .top-image-section {
            padding: 0 10px; 
            margin-top: -10px;
            margin-bottom: 25px;
            /* æ–°å¢ï¼šè®©å®¹å™¨æˆä¸ºå›¾ç‰‡çš„å®šä½å‚è€ƒ */
            position: relative;
        }
        
        .green-longmarch-img {
            /* ç§»é™¤å‘å·¦çš„è´Ÿè¾¹è·ï¼Œæ”¹ä¸ºè‡ªåŠ¨å¤–è¾¹è·å®ç°å±…ä¸­ */
            margin: 0 auto;
            /* ä¿æŒåŸé«˜åº¦ï¼Œå®½åº¦è°ƒæ•´ä¸ºå®¹å™¨å†…å¯ç”¨å®½åº¦ */
            max-width: 100%;
            height: auto;
            border-radius: 4px;
            cursor: pointer;
            transition: opacity 0.3s;
            /* æ–°å¢ï¼šå—çº§æ˜¾ç¤ºæ‰èƒ½ä½¿ç”¨margin autoå±…ä¸­ */
            display: block;
        }
        
        .green-longmarch-img:hover {
            opacity: 0.9;
        }
        
        .image-title {
            display: none;
        }
        
        .content-list {
            list-style: none;
            padding: 0 20px;
        }
        
        .content-item {
            padding: 12px 0;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .content-link {
            text-decoration: none;
            color: #070707;
            font-size: 15px;
            transition: color 0.2s;
        }
        
        .content-link:hover {
            color: #1890ff;
        }
        
        /* ç¿»è¯‘åº”ç”¨æ ·å¼ */
        .translation-app-section {
            margin-top: 20px;
            padding: 20px;
        }
        
        .translate-button {
            width: 100%;
            padding: 12px;
            background-color: #1890ff;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: background-color 0.3s;
        }
        
        .translate-button:hover {
            background-color: #40a9ff;
        }
        
        .translate-icon {
            font-size: 20px;
        }
        
        /* å¼¹çª—æ ·å¼ */
        .translate-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.4);
        }
        
        .translate-modal-content {
            background-color: #fefefe;
            margin: 10% auto;
            padding: 0;
            border: 1px solid #888;
            border-radius: 8px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            overflow: hidden;
        }
        
        .translate-modal-header {
            padding: 16px 20px;
            background-color: #f5f5f5;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #e8e8e8;
        }
        
        .translate-modal-header h3 {
            margin: 0;
            font-size: 18px;
            color: #333;
        }
        
        .translate-modal-close {
            color: #aaa;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .translate-modal-close:hover, .translate-modal-close:focus {
            color: #333;
            text-decoration: none;
        }
        
        .translate-modal-body {
            padding: 20px;
        }
        
        .language-selectors {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            align-items: center;
        }
        
        .language-select {
            flex: 1;
            padding: 8px;
            border: 1px solid #d9d9d9;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .swap-lang-button {
            width: 40px;
            height: 40px;
            border: 1px solid #d9d9d9;
            border-radius: 4px;
            background-color: #fafafa;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .swap-lang-button:hover {
            background-color: #f0f0f0;
        }
        
        .translate-textarea {
            width: 100%;
            height: 120px;
            padding: 10px;
            border: 1px solid #d9d9d9;
            border-radius: 4px;
            font-size: 14px;
            resize: none;
            margin-bottom: 15px;
            font-family: inherit;
        }
        
        .translate-textarea.result {
            background-color: #f9f9f9;
        }
        
        .do-translate-button {
            width: 100%;
            padding: 10px;
            background-color: #1890ff;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            margin-bottom: 15px;
        }
        
        .do-translate-button:hover {
            background-color: #40a9ff;
        }
        
        .do-translate-button:disabled {
            background-color: #d9d9d9;
            cursor: not-allowed;
        }
        
        .translate-status {
            text-align: center;
            font-size: 12px;
            color: #999;
            min-height: 16px;
        }
        
        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 480px) {
            .translate-modal-content {
                margin: 5% auto;
                width: 95%;
            }    
            
            .language-selectors {
                flex-wrap: wrap;
            }
            
            .language-select {
                flex: 1 1 40%;
            }
            
            .swap-lang-button {
                flex: 0 0 15%;
            }
        }
    </style>
</head>
<body>
    <div class="right-container">
        <div class="top-image-section">
            <a href="https://www.forestry.gov.cn/c/www/lcdt/624142.jhtml" target="_blank">
                <img src="./å›¾ç‰‡/å¾®ä¿¡å›¾ç‰‡_20251106134526_240_4.jpg" 
                     alt="å¤§å­¦ç”Ÿç»¿è‰²é•¿å¾æ´»åŠ¨ç°åœº" 
                     class="green-longmarch-img">
            </a>
        </div>
        
        <!-- åˆ†ç•Œçº¿ -->
        <div style="height: 1px; background-color: #000; margin: 10px 0;"></div>
        
        <!-- å¸¸ç”¨æ—…è¡Œå·¥å…·åŒºåŸŸ -->
        <div style="padding: 5px; margin: 0 0px;">
            <h3 style="font-size: 20px; margin-bottom: 8px; color: #1a1919; font-weight: bold;">å¸¸ç”¨æ—…è¡Œå·¥å…·</h3>
            
            <!-- ç¿»è¯‘åº”ç”¨åŒºåŸŸ -->
            <div class="translation-app-section">
                <button id="translate-btn" class="translate-button">
                    <span class="translate-icon">ğŸŒ</span>
                    <span>ç¿»è¯‘å·¥å…·</span>
                </button>
            </div>
            
            <!-- æ±‡ç‡è½¬æ¢åº”ç”¨åŒºåŸŸ -->
            <div class="currency-app-section" style="margin-top: 5px; padding: 0 20px;">
                <button id="currency-btn" class="translate-button">
                    <span class="translate-icon">ğŸ’°</span>
                    <span>æ±‡ç‡è½¬æ¢</span>
                </button>
            </div>
        </div>
        
        <!-- åˆ†ç•Œçº¿ -->
        <div style="height: 1px; background-color: #000; margin: 10px 0;"></div>
        
        <!-- çƒ­é—¨æ—…è¡Œæ´»åŠ¨æ¨è -->
        <div class="travel-activities-section" style="margin-top: 5px; padding: 0 20px; padding-top: 8px;">
            <h3 style="font-size: 18px; margin-bottom: 15px; color: #333; font-weight: bold;">çƒ­é—¨æ—…è¡Œæ´»åŠ¨æ¨è</h3>
            
            <!-- æ°´å¹³å¸ƒå±€çš„æ´»åŠ¨å¡ç‰‡å®¹å™¨ -->
            <div style="display: flex; gap: 10px; width: 100%;">
                <!-- æ´»åŠ¨å¡ç‰‡1 -->
                <a href="https://www.douyin.com/search/%E7%A3%90%E7%9F%B3%E8%A1%8C%E5%8A%A8%E6%B4%BB%E5%8A%A8%E5%AE%89%E6%8E%92?modal_id=7567663068365218542" 
                   target="_blank" 
                   style="text-decoration: none; color: inherit; flex: 1; border-radius: 8px; overflow: hidden; border: 1px solid #f0f0f0;">
                    <!-- å›¾ç‰‡å ä½ç¬¦ -->
                    <div style="background-color: #f5f5f5; height: 120px; display: flex; align-items: center; justify-content: center;">
                        <span style="color: #999; font-size: 12px;"><img src="./å›¾ç‰‡/å±å¹•æˆªå›¾ 2025-11-07 221123.png" alt="" style="max-width: 100%; max-height: 100%; object-fit: contain; display: block;"></span>
                    </div>
                    <!-- æ–‡å­—ä»‹ç» -->
                    <div style="padding: 10px;">
                        <p style="font-size: 12px; color: #333; margin: 0; line-height: 1.4; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;" title="ç£çŸ³è¡ŒåŠ¨ï¼Œæ‹¥æŠ±å±±é‡ï¼Œé‡Šæ”¾æ¿€æƒ…">ç£çŸ³è¡ŒåŠ¨ï¼Œæ‹¥æŠ±å±±é‡ï¼Œé‡Šæ”¾æ¿€æƒ…</p>
                    </div>
                </a>
                
                <!-- æ´»åŠ¨å¡ç‰‡2 -->
                <a href="https://www.douyin.com/search/%E6%89%93%E5%8D%A1%E4%B8%AD%E5%9B%BD%E5%B1%B1%E7%AC%AC%E4%B8%80%E6%9C%9F%E5%B1%B1%E6%B2%B3%E8%A1%8C?aid=a73ce68c-0fe2-4080-a769-347ffd0a0a18&modal_id=7561387025484582178&type=general" 
                   target="_blank" 
                   style="text-decoration: none; color: inherit; flex: 1; border-radius: 8px; overflow: hidden; border: 1px solid #f0f0f0;">
                    <!-- å›¾ç‰‡å ä½ç¬¦ -->
                    <div style="background-color: #f5f5f5; height: 120px; display: flex; align-items: center; justify-content: center;">
                        <span style="color: #999; font-size: 12px;"><img src="./å›¾ç‰‡/å±å¹•æˆªå›¾ 2025-11-07 221208.png" alt="" style="max-width: 100%; max-height: 100%; object-fit: contain; display: block;"></span>
                    </div>
                    <!-- æ–‡å­—ä»‹ç» -->
                    <div style="padding: 10px;">
                        <p style="font-size: 12px; color: #333; margin: 0; line-height: 1.4; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;" title="æ‰“å¡ä¸­å›½å±±ï¼Œå±±æ²³è¡Œï¼Œé«˜æ ¡ç¯‡ï¼Œå±±å‹ä¼š">æ‰“å¡ä¸­å›½å±±ï¼Œå±±æ²³è¡Œï¼Œé«˜æ ¡ç¯‡ï¼Œå±±å‹ä¼š</p>
                    </div>
                </a>
            </div>
        </div>
        
        <!-- åˆ†ç•Œçº¿ -->
        <div style="height: 1px; background-color: #000; margin: 10px 0;"></div>
        
        <!-- å¤§å­¦ç”Ÿçƒ­é—¨æ—…è¡Œå›¢æ¨è -->
        <div class="student-tour-section" style="margin-top: 5px; padding: 0 20px; padding-top: 8px;">
            <h3 style="font-size: 18px; margin-bottom: 15px; color: #333; font-weight: bold;">å¤§å­¦ç”Ÿçƒ­é—¨æ—…è¡Œå›¢æ¨è</h3>
            
            <!-- è½®æ’­å›¾ç‰‡å®¹å™¨ -->
            <div style="position: relative; width: 100%; height: 120px; overflow: hidden; border-radius: 8px; background-color: #f5f5f5;">
                <!-- è½®æ’­å†…å®¹å®¹å™¨ -->
                <div id="tour-carousel" style="display: flex; transition: transform 0.3s ease; height: 100%;">
                    <!-- å›¾ç‰‡1 -->
                    <a href="https://vacations.ctrip.com/travel/detail/p43188277?city=41" target="_blank" style="display: block; width: 100%; height: 100%; flex-shrink: 0;">
                        <div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center;">
                            <span style="color: #999; font-size: 14px;"><img src="./å›¾ç‰‡/å±å¹•æˆªå›¾ 2025-11-05 234948.png" alt="" style="max-width: 100%; max-height: 100%; object-fit: contain; display: block;"></span>
                        </div>
                    </a>
                    <!-- å›¾ç‰‡2 -->
                    <a href="https://vacations.ctrip.com/travel/detail/p65829947?city=547" target="_blank" style="display: block; width: 100%; height: 100%; flex-shrink: 0;">
                        <div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center;">
                            <span style="color: #999; font-size: 14px;"><img src="./å›¾ç‰‡/å±å¹•æˆªå›¾ 2025-11-07 221257.png" alt="" style="max-width: 100%; max-height: 100%; object-fit: contain; display: block;"></span>
                        </div>
                    </a>
                </div>
                <!-- å·¦ç®­å¤´æŒ‰é’® -->
                <button id="carousel-prev" style="position: absolute; left: 10px; top: 50%; transform: translateY(-50%); width: 30px; height: 30px; border-radius: 50%; background-color: rgba(0, 0, 0, 0.5); color: white; border: none; font-size: 16px; cursor: pointer; z-index: 10;">â†</button>
                <!-- å³ç®­å¤´æŒ‰é’® -->
                <button id="carousel-next" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); width: 30px; height: 30px; border-radius: 50%; background-color: rgba(0, 0, 0, 0.5); color: white; border: none; font-size: 16px; cursor: pointer; z-index: 10;">â†’</button>
                <!-- æŒ‡ç¤ºå™¨ -->
                <div style="position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%); display: flex; gap: 5px;">
                    <span class="carousel-indicator active" data-index="0" style="width: 8px; height: 8px; border-radius: 50%; background-color: white; cursor: pointer;"></span>
                    <span class="carousel-indicator" data-index="1" style="width: 8px; height: 8px; border-radius: 50%; background-color: rgba(255, 255, 255, 0.5); cursor: pointer;"></span>
                </div>
            </div>
            
            <script>
                // è½®æ’­åŠŸèƒ½å®ç°
                const carousel = document.getElementById('tour-carousel');
                const prevBtn = document.getElementById('carousel-prev');
                const nextBtn = document.getElementById('carousel-next');
                const indicators = document.querySelectorAll('.carousel-indicator');
                let currentIndex = 0;
                const totalSlides = indicators.length;
                
                function updateCarousel() {
                    // ç§»åŠ¨è½®æ’­
                    carousel.style.transform = `translateX(-${currentIndex * 100}%)`;
                    
                    // æ›´æ–°æŒ‡ç¤ºå™¨
                    indicators.forEach((indicator, index) => {
                        if (index === currentIndex) {
                            indicator.style.backgroundColor = 'white';
                        } else {
                            indicator.style.backgroundColor = 'rgba(255, 255, 255, 0.5)';
                        }
                    });
                }
                
                prevBtn.addEventListener('click', () => {
                    currentIndex = (currentIndex - 1 + totalSlides) % totalSlides;
                    updateCarousel();
                });
                
                nextBtn.addEventListener('click', () => {
                    currentIndex = (currentIndex + 1) % totalSlides;
                    updateCarousel();
                });
                
                indicators.forEach(indicator => {
                    indicator.addEventListener('click', () => {
                        currentIndex = parseInt(indicator.getAttribute('data-index'));
                        updateCarousel();
                    });
                });
                
                // è‡ªåŠ¨è½®æ’­ï¼ˆæ¯5ç§’åˆ‡æ¢ä¸€æ¬¡ï¼‰
                setInterval(() => {
                    currentIndex = (currentIndex + 1) % totalSlides;
                    updateCarousel();
                }, 5000);
            </script>
        </div>
    </div>

    <!-- æ±‡ç‡è½¬æ¢å¼¹çª— -->
    <div id="currency-modal" class="translate-modal">
        <div class="translate-modal-content">
            <div class="translate-modal-header">
                <h3 style="font-weight: bold;">æ±‡ç‡è½¬æ¢</h3>
                <span class="translate-modal-close">&times;</span>
            </div>
            <div class="translate-modal-body">
                <div class="language-selectors">
                    <select id="source-currency" class="language-select">
                        <option value="CNY">äººæ°‘å¸ (CNY)</option>
                        <option value="USD">ç¾å…ƒ (USD)</option>
                        <option value="EUR">æ¬§å…ƒ (EUR)</option>
                        <option value="JPY">æ—¥å…ƒ (JPY)</option>
                        <option value="GBP">è‹±é•‘ (GBP)</option>
                        <option value="KRW">éŸ©å…ƒ (KRW)</option>
                        <option value="HKD">æ¸¯å¸ (HKD)</option>
                        <option value="TWD">æ–°å°å¸ (TWD)</option>
                    </select>
                    <button id="swap-currency-btn" class="swap-lang-button">â‡„</button>
                    <select id="target-currency" class="language-select">
                        <option value="USD">ç¾å…ƒ (USD)</option>
                        <option value="CNY">äººæ°‘å¸ (CNY)</option>
                        <option value="EUR">æ¬§å…ƒ (EUR)</option>
                        <option value="JPY">æ—¥å…ƒ (JPY)</option>
                        <option value="GBP">è‹±é•‘ (GBP)</option>
                        <option value="KRW">éŸ©å…ƒ (KRW)</option>
                        <option value="HKD">æ¸¯å¸ (HKD)</option>
                        <option value="TWD">æ–°å°å¸ (TWD)</option>
                    </select>
                </div>
                <div style="margin-bottom: 15px;">
                    <input type="text" id="amount-input" class="translate-textarea" style="height: auto; padding: 10px;" placeholder="è¯·è¾“å…¥é‡‘é¢ï¼ˆæ•°å­—ï¼‰">
                    <div id="amount-error" style="color: #ff4d4f; font-size: 12px; min-height: 16px; margin-top: 5px;"></div>
                </div>
                <button id="do-convert-btn" class="do-translate-button">è½¬æ¢</button>
                <div style="background-color: #f9f9f9; padding: 15px; border-radius: 4px; margin-bottom: 15px;">
                    <div id="conversion-result" style="font-size: 16px; font-weight: bold; text-align: center;"></div>
                    <div id="conversion-rate" style="font-size: 14px; color: #666; text-align: center; margin-top: 5px;"></div>
                </div>
                <button id="currency-done-btn" class="do-translate-button" style="background-color: #52c41a;">è½¬æ¢å®Œæˆ</button>
                <div id="currency-status" class="translate-status"></div>
            </div>
        </div>
    </div>

    <!-- ç¿»è¯‘å¼¹çª— -->
    <div id="translate-modal" class="translate-modal">
        <div class="translate-modal-content">
            <div class="translate-modal-header">
                <h3 style="font-weight: bold;">ç¿»è¯‘å·¥å…·</h3>
                <span class="translate-modal-close">&times;</span>
            </div>
            <div class="translate-modal-body">
                <div class="language-selectors">
                    <select id="source-lang" class="language-select">
                        <option value="zh">ä¸­æ–‡</option>
                        <option value="en">è‹±è¯­</option>
                        <option value="ja">æ—¥è¯­</option>
                        <option value="ko">éŸ©è¯­</option>
                        <option value="fr">æ³•è¯­</option>
                        <option value="de">å¾·è¯­</option>
                        <option value="es">è¥¿ç­ç‰™è¯­</option>
                        <option value="ru">ä¿„è¯­</option>
                    </select>
                    <button id="swap-lang-btn" class="swap-lang-button">â‡„</button>
                    <select id="target-lang" class="language-select">
                        <option value="en">è‹±è¯­</option>
                        <option value="zh">ä¸­æ–‡</option>
                        <option value="ja">æ—¥è¯­</option>
                        <option value="ko">éŸ©è¯­</option>
                        <option value="fr">æ³•è¯­</option>
                        <option value="de">å¾·è¯­</option>
                        <option value="es">è¥¿ç­ç‰™è¯­</option>
                        <option value="ru">ä¿„è¯­</option>
                    </select>
                </div>
                <textarea id="source-text" class="translate-textarea" placeholder="è¯·è¾“å…¥è¦ç¿»è¯‘çš„æ–‡æœ¬..."></textarea>
                <button id="do-translate-btn" class="do-translate-button">ç¿»è¯‘</button>
                <textarea id="result-text" class="translate-textarea result" placeholder="ç¿»è¯‘ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ" readonly></textarea>
                <button id="translation-done-btn" class="do-translate-button" style="background-color: #52c41a;">ç¿»è¯‘å®Œæˆ</button>
                <div id="translate-status" class="translate-status"></div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const img = document.querySelector('.green-longmarch-img');
            img.addEventListener('error', function() {
                this.alt = "å¤§å­¦ç”Ÿç»¿è‰²é•¿å¾å›¾ç‰‡ï¼ˆåŠ è½½ä¸­ï¼‰";
                this.style.backgroundColor = "#f5f5f5";
                this.style.display = "flex";
                this.style.alignItems = "center";
                this.style.justifyContent = "center";
                this.style.color = "#888";
                this.style.fontSize = "12px";
                this.innerHTML = "ç‚¹å‡»æŸ¥çœ‹ç»¿è‰²é•¿å¾æ´»åŠ¨è¯¦æƒ…";
            });
            
            // ç¿»è¯‘å·¥å…·åŠŸèƒ½
            const modal = document.getElementById('translate-modal');
            const translateBtn = document.getElementById('translate-btn');
            const closeBtn = document.getElementsByClassName('translate-modal-close')[0];
            const doTranslateBtn = document.getElementById('do-translate-btn');
            const translationDoneBtn = document.getElementById('translation-done-btn');
            const swapLangBtn = document.getElementById('swap-lang-btn');
            const sourceLangSelect = document.getElementById('source-lang');
            const targetLangSelect = document.getElementById('target-lang');
            const sourceText = document.getElementById('source-text');
            const resultText = document.getElementById('result-text');
            const statusText = document.getElementById('translate-status');
            
            // ç¿»è¯‘APIé…ç½®
            const API_URL = 'http://localhost:3000/api/translate';
            
            // æ¨¡æ‹Ÿç¿»è¯‘æ•°æ®ï¼Œç”¨äºAPIè°ƒç”¨å¤±è´¥æ—¶çš„å¤‡ç”¨æ–¹æ¡ˆ
            const fallbackTranslations = {
                'zh_to_en': 'Hello, this is a translation result from Chinese to English.',
                'en_to_zh': 'æ‚¨å¥½ï¼Œè¿™æ˜¯ä»è‹±è¯­åˆ°ä¸­æ–‡çš„ç¿»è¯‘ç»“æœã€‚',
                'zh_to_ja': 'ã“ã‚“ã«ã¡ã¯ã€ã“ã‚Œã¯ä¸­å›½èªã‹ã‚‰æ—¥æœ¬èªã¸ã®ç¿»è¨³çµæœã§ã™ã€‚',
                'zh_to_ko': 'ì•ˆë…•í•˜ì„¸ìš”, ì´ê²ƒì€ ì¤‘êµ­ì–´ì—ì„œ í•œêµ­ì–´ë¡œì˜ ë²ˆì—­ ê²°ê³¼ì…ë‹ˆë‹¤.',
                'zh_to_fr': 'Bonjour, c\'est un rÃ©sultat de traduction du chinois vers l\'anglais.',
                'zh_to_de': 'Hallo, dies ist ein Ãœbersetzungsergebnis vom Chinesischen ins Englische.',
                'zh_to_es': 'Hola, este es un resultado de traducciÃ³n del chino al inglÃ©s.',
                'zh_to_ru': 'ĞŸÑ€Ğ¸Ğ²ĞµÑ‚, ÑÑ‚Ğ¾ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ğ° Ñ ĞºĞ¸Ñ‚Ğ°Ğ¹ÑĞºĞ¾Ğ³Ğ¾ Ğ½Ğ° Ğ°Ğ½Ğ³Ğ»Ğ¸Ğ¹ÑĞºĞ¸Ğ¹.',
                'en_to_ja': 'ã“ã‚“ã«ã¡ã¯ã€ã“ã‚Œã¯è‹±èªã‹ã‚‰æ—¥æœ¬èªã¸ã®ç¿»è¨³çµæœã§ã™ã€‚',
                'en_to_ko': 'ì•ˆë…•í•˜ì„¸ìš”, ì´ê²ƒì€ ì˜ì–´ì—ì„œ í•œêµ­ì–´ë¡œì˜ ë²ˆì—­ ê²°ê³¼ì…ë‹ˆë‹¤.',
                'en_to_fr': 'Bonjour, c\'est un rÃ©sultat de traduction de l\'anglais vers le franÃ§ais.',
                'en_to_de': 'Hallo, dies ist ein Ãœbersetzungsergebnis vom Englischen ins Deutsche.',
                'en_to_es': 'Hola, este es un resultado de traducciÃ³n del inglÃ©s al espaÃ±ol.',
                'en_to_ru': 'ĞŸÑ€Ğ¸Ğ²ĞµÑ‚, ÑÑ‚Ğ¾ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ğ° Ñ Ğ°Ğ½Ğ³Ğ»Ğ¸Ğ¹ÑĞºĞ¾Ğ³Ğ¾ Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¸Ğ¹.',
                'default': 'Translation result would appear here.'
            };
            
            // æ‰“å¼€å¼¹çª—
            translateBtn.onclick = function() {
                modal.style.display = 'block';
            }
            
            // å…³é—­å¼¹çª— - ä¸ºæ‰€æœ‰å…³é—­æŒ‰é’®ç»‘å®šäº‹ä»¶
            const closeBtns = modal.getElementsByClassName('translate-modal-close');
            for (let i = 0; i < closeBtns.length; i++) {
                closeBtns[i].onclick = function() {
                    modal.style.display = 'none';
                }
            }
            
            // ç¿»è¯‘å®ŒæˆæŒ‰é’®ç‚¹å‡»äº‹ä»¶
            translationDoneBtn.onclick = function() {
                modal.style.display = 'none';
            }
            
            // ç‚¹å‡»å¼¹çª—å¤–éƒ¨å…³é—­
            window.onclick = function(event) {
                if (event.target == modal) {
                    modal.style.display = 'none';
                } else if (event.target == currencyModal) {
                    currencyModal.style.display = 'none';
                }
            }
            
            // æ±‡ç‡è½¬æ¢åŠŸèƒ½
            const currencyModal = document.getElementById('currency-modal');
            const currencyBtn = document.getElementById('currency-btn');
            const currencyCloseBtns = currencyModal.getElementsByClassName('translate-modal-close');
            const currencyDoneBtn = document.getElementById('currency-done-btn');
            const swapCurrencyBtn = document.getElementById('swap-currency-btn');
            const sourceCurrencySelect = document.getElementById('source-currency');
            const targetCurrencySelect = document.getElementById('target-currency');
            const amountInput = document.getElementById('amount-input');
            const amountError = document.getElementById('amount-error');
            const doConvertBtn = document.getElementById('do-convert-btn');
            const conversionResult = document.getElementById('conversion-result');
            const conversionRate = document.getElementById('conversion-rate');
            const currencyStatus = document.getElementById('currency-status');
            
            // æ‰“å¼€æ±‡ç‡è½¬æ¢å¼¹çª—
            currencyBtn.onclick = function() {
                currencyModal.style.display = 'block';
                // é‡ç½®è¡¨å•
                amountInput.value = '';
                amountError.textContent = '';
                conversionResult.textContent = '';
                conversionRate.textContent = '';
                currencyStatus.textContent = '';
            }
            
            // å…³é—­æ±‡ç‡è½¬æ¢å¼¹çª— - å…³é—­æŒ‰é’®
            for (let i = 0; i < currencyCloseBtns.length; i++) {
                currencyCloseBtns[i].onclick = function() {
                    currencyModal.style.display = 'none';
                }
            }
            
            // è½¬æ¢å®ŒæˆæŒ‰é’®ç‚¹å‡»äº‹ä»¶
            currencyDoneBtn.onclick = function() {
                currencyModal.style.display = 'none';
            }
            
            // äº¤æ¢è´§å¸
            swapCurrencyBtn.onclick = function() {
                const temp = sourceCurrencySelect.value;
                sourceCurrencySelect.value = targetCurrencySelect.value;
                targetCurrencySelect.value = temp;
            }
            
            // æ±‡ç‡è½¬æ¢åŠŸèƒ½
            doConvertBtn.onclick = async function() {
                const amountText = amountInput.value.trim();
                const sourceCurrency = sourceCurrencySelect.value;
                const targetCurrency = targetCurrencySelect.value;
                
                // è¾“å…¥éªŒè¯
                if (!amountText) {
                    amountError.textContent = 'è¯·è¾“å…¥é‡‘é¢';
                    amountError.style.color = '#ff4d4f'; // è®¾ç½®çº¢è‰²é”™è¯¯æç¤º
                    return;
                }
                
                // éªŒè¯æ˜¯å¦ä¸ºæœ‰æ•ˆæ•°å­—
                const amount = parseFloat(amountText);
                if (isNaN(amount) || amount <= 0) {
                    amountError.textContent = 'è¯·è¾“å…¥æœ‰æ•ˆçš„æ­£æ•°é‡‘é¢';
                    amountError.style.color = '#ff4d4f'; // è®¾ç½®çº¢è‰²é”™è¯¯æç¤º
                    return;
                }
                
                // éªŒè¯è´§å¸é€‰æ‹©
                if (!sourceCurrency || !targetCurrency) {
                    amountError.textContent = 'è¯·é€‰æ‹©è´§å¸';
                    amountError.style.color = '#ff4d4f'; // è®¾ç½®çº¢è‰²é”™è¯¯æç¤º
                    return;
                }
                
                // éªŒè¯æºè´§å¸ä¸ç›®æ ‡è´§å¸æ˜¯å¦ç›¸åŒ
                if (sourceCurrency === targetCurrency) {
                    amountError.textContent = 'æºè´§å¸å’Œç›®æ ‡è´§å¸ä¸èƒ½ç›¸åŒ';
                    amountError.style.color = '#ff4d4f'; // è®¾ç½®çº¢è‰²é”™è¯¯æç¤º
                    return;
                }
                
                try {
                    // éšè—é”™è¯¯æç¤º
                    amountError.textContent = '';
                    
                    // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
                    doConvertBtn.disabled = true;
                    currencyStatus.textContent = 'è½¬æ¢ä¸­...';
                    currencyStatus.style.color = '#1890ff';
                    conversionResult.textContent = '';
                    conversionRate.textContent = '';
                    
                    // è°ƒç”¨æ±‡ç‡è½¬æ¢å‡½æ•°
                    const result = await convertCurrency(amount, sourceCurrency, targetCurrency);
                    
                    // æ˜¾ç¤ºè½¬æ¢ç»“æœ
                    conversionResult.textContent = `${amount.toFixed(2)} ${sourceCurrency} = ${result.amount.toFixed(2)} ${targetCurrency}`;
                    conversionRate.textContent = `æ±‡ç‡: 1 ${sourceCurrency} = ${result.rate} ${targetCurrency}`;
                    
                    // éšè—çŠ¶æ€ä¿¡æ¯
                    currencyStatus.textContent = '';
                    
                } catch (error) {
                    // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
                    currencyStatus.textContent = error.message || 'æ±‡ç‡è½¬æ¢å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•';
                    currencyStatus.style.color = '#ff4d4f';
                } finally {
                    // æ¢å¤æŒ‰é’®çŠ¶æ€
                    doConvertBtn.disabled = false;
                }
            }
            
            // é‡‘é¢è¾“å…¥éªŒè¯
            amountInput.oninput = function() {
                // åªå…è®¸è¾“å…¥æ•°å­—å’Œå°æ•°ç‚¹
                this.value = this.value.replace(/[^0-9.]/g, '');
                // ç¡®ä¿åªæœ‰ä¸€ä¸ªå°æ•°ç‚¹
                const parts = this.value.split('.');
                if (parts.length > 2) {
                    this.value = parts[0] + '.' + parts.slice(1).join('');
                }
                // æ¸…é™¤é”™è¯¯æç¤º
                if (this.value.trim()) {
                    amountError.textContent = '';
                }
            }
            
            // æ·»åŠ è¾“å…¥æ¡†è·å–ç„¦ç‚¹æ—¶æ¸…é™¤é”™è¯¯æç¤º
            amountInput.onfocus = function() {
                if (amountError.textContent) {
                    amountError.textContent = '';
                }
            }
            
            // æ·»åŠ è¾“å…¥æ¡†è·å–ç„¦ç‚¹æ—¶æ¸…é™¤é”™è¯¯æç¤º
            amountInput.onfocus = function() {
                if (amountError.textContent) {
                    amountError.textContent = '';
                }
            }
            
            /**
             * æ±‡ç‡è½¬æ¢å‡½æ•°
             * @param {number} amount - é‡‘é¢
             * @param {string} sourceCurrency - æºè´§å¸ä»£ç 
             * @param {string} targetCurrency - ç›®æ ‡è´§å¸ä»£ç 
             * @returns {Promise<Object>} è½¬æ¢ç»“æœ
             */
            async function convertCurrency(amount, sourceCurrency, targetCurrency) {
                try {
                    // æ„å»ºè¯·æ±‚å‚æ•°
                    const requestData = {
                        action: 'currency_convert',
                        amount: amount,
                        from_currency: sourceCurrency,
                        to_currency: targetCurrency
                    };
                    
                    // è®°å½•è¯·æ±‚å‚æ•°
                    console.log('å‘é€æ±‡ç‡è½¬æ¢è¯·æ±‚:', requestData);
                    
                    // è®¾ç½®è¯·æ±‚è¶…æ—¶
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), 10000); // 10ç§’è¶…æ—¶
                    
                    // è°ƒç”¨DeepSeek API (ä½¿ç”¨ä¸ç¿»è¯‘ç›¸åŒçš„ç«¯ç‚¹ï¼Œä½†æä¾›ä¸åŒçš„actionå‚æ•°)
                    const response = await fetch(API_URL, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(requestData),
                        signal: controller.signal
                    });
                    
                    clearTimeout(timeoutId); // æ¸…é™¤è¶…æ—¶å®šæ—¶å™¨
                    
                    if (!response.ok) {
                        // å¦‚æœAPIè°ƒç”¨å¤±è´¥ï¼Œä½¿ç”¨æ¨¡æ‹Ÿæ±‡ç‡æ•°æ®
                        console.log('APIè°ƒç”¨å¤±è´¥ï¼Œä½¿ç”¨æ¨¡æ‹Ÿæ±‡ç‡æ•°æ®');
                        return getMockExchangeRate(amount, sourceCurrency, targetCurrency);
                    }
                    
                    const data = await response.json();
                    console.log('æ±‡ç‡è½¬æ¢APIå“åº”:', data);
                    
                    if (data.success && data.convertedAmount) {
                        return {
                            amount: data.convertedAmount,
                            rate: data.exchangeRate
                        };
                    } else {
                        // å¦‚æœAPIè¿”å›çš„æ•°æ®ä¸ç¬¦åˆé¢„æœŸï¼Œä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
                        console.log('APIè¿”å›æ•°æ®ä¸ç¬¦åˆé¢„æœŸï¼Œä½¿ç”¨æ¨¡æ‹Ÿæ±‡ç‡æ•°æ®');
                        return getMockExchangeRate(amount, sourceCurrency, targetCurrency);
                    }
                } catch (error) {
                    console.error('æ±‡ç‡è½¬æ¢APIè°ƒç”¨å¤±è´¥:', error);
                    console.error('APIå“åº”:', error.response?.data || 'æ— å“åº”æ•°æ®');
                    
                    // å¤„ç†APIé”™è¯¯å“åº”
                    if (error.response?.data?.error) {
                        // å¦‚æœAPIè¿”å›äº†å…·ä½“é”™è¯¯ä¿¡æ¯ï¼ŒæŠ›å‡ºå®ƒ
                        throw new Error(error.response.data.error);
                    }
                    
                    // APIè°ƒç”¨å¤±è´¥æ—¶ä½¿ç”¨å¤‡ç”¨æ±‡ç‡æ•°æ®
                    console.log('ä½¿ç”¨å¤‡ç”¨æ±‡ç‡æ•°æ®...');
                    return getMockExchangeRate(amount, sourceCurrency, targetCurrency);
                }
            }
            
            /**
             * è·å–æ¨¡æ‹Ÿæ±‡ç‡æ•°æ®
             * @param {number} amount - é‡‘é¢
             * @param {string} sourceCurrency - æºè´§å¸ä»£ç 
             * @param {string} targetCurrency - ç›®æ ‡è´§å¸ä»£ç 
             * @returns {Object} æ¨¡æ‹Ÿçš„è½¬æ¢ç»“æœ
             */
            function getMockExchangeRate(amount, sourceCurrency, targetCurrency) {
                // æ¨¡æ‹Ÿæ±‡ç‡æ•°æ®
                const mockRates = {
                    'CNY_USD': 0.1389,
                    'CNY_EUR': 0.1288,
                    'CNY_JPY': 21.16,
                    'CNY_GBP': 0.1112,
                    'CNY_KRW': 183.67,
                    'CNY_HKD': 1.0829,
                    'CNY_TWD': 4.36,
                    'USD_CNY': 7.20,
                    'USD_EUR': 0.9273,
                    'USD_JPY': 152.38,
                    'USD_GBP': 0.8009,
                    'USD_KRW': 1322.32,
                    'USD_HKD': 7.7961,
                    'USD_TWD': 31.41,
                    'EUR_CNY': 7.7647,
                    'EUR_USD': 1.0784,
                    'EUR_JPY': 164.30,
                    'EUR_GBP': 0.8633,
                    'EUR_KRW': 1426.32,
                    'EUR_HKD': 8.4085,
                    'EUR_TWD': 33.85,
                    'JPY_CNY': 0.0473,
                    'JPY_USD': 0.00656,
                    'JPY_EUR': 0.00609,
                    'JPY_GBP': 0.00525,
                    'JPY_KRW': 8.68,
                    'JPY_HKD': 0.0512,
                    'JPY_TWD': 0.2060,
                    'GBP_CNY': 9.00,
                    'GBP_USD': 1.2486,
                    'GBP_EUR': 1.1584,
                    'GBP_JPY': 190.30,
                    'GBP_KRW': 1651.75,
                    'GBP_HKD': 9.7386,
                    'GBP_TWD': 39.20,
                    'KRW_CNY': 0.00545,
                    'KRW_USD': 0.000756,
                    'KRW_EUR': 0.000701,
                    'KRW_JPY': 0.1152,
                    'KRW_GBP': 0.000605,
                    'KRW_HKD': 0.00589,
                    'KRW_TWD': 0.0237,
                    'HKD_CNY': 0.9234,
                    'HKD_USD': 0.1283,
                    'HKD_EUR': 0.1189,
                    'HKD_JPY': 19.54,
                    'HKD_GBP': 0.1027,
                    'HKD_KRW': 170.21,
                    'HKD_TWD': 4.0264,
                    'TWD_CNY': 0.2294,
                    'TWD_USD': 0.0318,
                    'TWD_EUR': 0.0295,
                    'TWD_JPY': 4.8333,
                    'TWD_GBP': 0.0255,
                    'TWD_KRW': 42.19
                };
                
                const key = `${sourceCurrency}_${targetCurrency}`;
                let rate = mockRates[key];
                
                // å¦‚æœæ‰¾ä¸åˆ°ç›´æ¥æ±‡ç‡ï¼Œå°è¯•é€šè¿‡USDä¸­è½¬
                if (!rate) {
                    const sourceToUSD = mockRates[`${sourceCurrency}_USD`];
                    const usdToTarget = mockRates[`USD_${targetCurrency}`];
                    if (sourceToUSD && usdToTarget) {
                        rate = sourceToUSD * usdToTarget;
                    } else {
                        // æœ€åçš„å¤‡ç”¨æ±‡ç‡
                        rate = 1;
                    }
                }
                
                // è®¡ç®—è½¬æ¢åçš„é‡‘é¢
                const convertedAmount = parseFloat((amount * rate).toFixed(2));
                
                return {
                    amount: convertedAmount,
                    rate: rate.toFixed(6)
                };
            }
            
            // äº¤æ¢è¯­è¨€
            swapLangBtn.onclick = function() {
                const temp = sourceLangSelect.value;
                sourceLangSelect.value = targetLangSelect.value;
                targetLangSelect.value = temp;
                
                // å¦‚æœæœ‰ç¿»è¯‘ç»“æœï¼Œä¹Ÿäº¤æ¢æ–‡æœ¬
                if (resultText.value.trim()) {
                    const textTemp = sourceText.value;
                    sourceText.value = resultText.value;
                    resultText.value = textTemp;
                }
            }
            
            // ç¿»è¯‘åŠŸèƒ½
            doTranslateBtn.onclick = async function() {
                const text = sourceText.value.trim();
                if (!text) {
                    statusText.textContent = 'è¯·è¾“å…¥è¦ç¿»è¯‘çš„æ–‡æœ¬';
                    statusText.style.color = '#ff4d4f';
                    return;
                }
                
                const sourceLang = sourceLangSelect.value;
                const targetLang = targetLangSelect.value;
                
                if (sourceLang === targetLang) {
                    statusText.textContent = 'æºè¯­è¨€å’Œç›®æ ‡è¯­è¨€ä¸èƒ½ç›¸åŒ';
                    statusText.style.color = '#ff4d4f';
                    return;
                }
                
                doTranslateBtn.disabled = true;
                statusText.textContent = 'ç¿»è¯‘ä¸­...';
                statusText.style.color = '#1890ff';
                
                try {
                    // è°ƒç”¨ç«å±±å¼•æ“ç¿»è¯‘API
                    const result = await translateText(text, sourceLang, targetLang);
                    resultText.value = result;
                    // ç§»é™¤ç¿»è¯‘å®Œæˆæ–‡æœ¬æç¤ºï¼Œåªä¿ç•™æŒ‰é’®
                    statusText.textContent = '';
                } catch (error) {
                    console.error('ç¿»è¯‘å‡ºé”™:', error);
                    statusText.textContent = error.message.split('\n')[0]; // åªæ˜¾ç¤ºç¬¬ä¸€è¡Œé”™è¯¯ä¿¡æ¯
                    statusText.style.color = '#ff4d4f';
                    
                    // ä½¿ç”¨å¤‡ç”¨ç¿»è¯‘æ•°æ®
                    const fallbackKey = `${sourceLang}_to_${targetLang}`;
                    const fallbackText = fallbackTranslations[fallbackKey] || fallbackTranslations.default;
                    resultText.value = `${fallbackText}\n\n[æç¤ºï¼šç”±äºAPIé™åˆ¶æˆ–ç½‘ç»œé—®é¢˜ï¼Œè¿™æ˜¯å¤‡ç”¨ç¿»è¯‘ç»“æœã€‚æ‚¨è¾“å…¥çš„æ–‡æœ¬ï¼š"${text.substring(0, 20)}${text.length > 20 ? '...' : ''}"]`;
                } finally {
                    doTranslateBtn.disabled = false;
                }
            }
            
            /**
             * ç¿»è¯‘æ–‡æœ¬å‡½æ•°
             * @param {string} text - è¦ç¿»è¯‘çš„æ–‡æœ¬
             * @param {string} sourceLang - æºè¯­è¨€ä»£ç 
             * @param {string} targetLang - ç›®æ ‡è¯­è¨€ä»£ç 
             * @returns {Promise<string>} ç¿»è¯‘ç»“æœ
             */
            async function translateText(text, sourceLang, targetLang) {
                // è¾“å…¥éªŒè¯
                if (!text || !text.trim()) {
                    return 'è¯·è¾“å…¥è¦ç¿»è¯‘çš„æ–‡æœ¬';
                }
                
                if (sourceLang === targetLang) {
                    return text; // å¦‚æœæºè¯­è¨€å’Œç›®æ ‡è¯­è¨€ç›¸åŒï¼Œç›´æ¥è¿”å›åŸæ–‡
                }
                
                // ç›´æ¥ä½¿ç”¨å‰ç«¯å¤‡ç”¨ç¿»è¯‘æœºåˆ¶ï¼Œä¸éœ€è¦ä¾èµ–åç«¯APIæœåŠ¡
                // ç”Ÿæˆå¤‡ç”¨ç¿»è¯‘é”®
                const fallbackKey = `${sourceLang}_to_${targetLang}`;
                
                // è·å–åŸºç¡€ç¿»è¯‘æ–‡æœ¬
                let fallbackText = fallbackTranslations[fallbackKey] || fallbackTranslations.default;
                
                // ä¼˜åŒ–ï¼šå¯¹äºå¸¸è§çš„ä¸­è‹±æ–‡ç¿»è¯‘æä¾›æ›´ç®€æ´çš„ç¿»è¯‘ç»“æœ
                if (text.length > 0) {
                    // ä¸­æ–‡åˆ°è‹±æ–‡çš„åŸºæœ¬ç¿»è¯‘æ˜ å°„
                    const basicTranslationsZhToEn = {
                        'ä½ å¥½': 'Hello',
                        'è°¢è°¢': 'Thank you',
                        'å†è§': 'Goodbye',
                        'æ˜¯çš„': 'Yes',
                        'ä¸æ˜¯': 'No',
                        'è¯·': 'Please',
                        'å¯¹ä¸èµ·': 'Sorry',
                        'æ²¡å…³ç³»': 'It\'s okay'
                    };
                    
                    // è‹±æ–‡åˆ°ä¸­æ–‡çš„åŸºæœ¬ç¿»è¯‘æ˜ å°„
                    const basicTranslationsEnToZh = {
                        'hello': 'ä½ å¥½',
                        'thank you': 'è°¢è°¢',
                        'goodbye': 'å†è§',
                        'yes': 'æ˜¯çš„',
                        'no': 'ä¸æ˜¯',
                        'please': 'è¯·',
                        'sorry': 'å¯¹ä¸èµ·',
                        'it\'s okay': 'æ²¡å…³ç³»'
                    };
                    
                    // æ£€æŸ¥æ˜¯å¦æœ‰åŸºç¡€ç¿»è¯‘å¯ç”¨
                    if (sourceLang === 'zh' && targetLang === 'en') {
                        fallbackText = basicTranslationsZhToEn[text.trim()] || fallbackText;
                    } else if (sourceLang === 'en' && targetLang === 'zh') {
                        fallbackText = basicTranslationsEnToZh[text.trim().toLowerCase()] || fallbackText;
                    }
                }
                
                console.log('ä½¿ç”¨å‰ç«¯ç¿»è¯‘ç»“æœ:', fallbackText);
                return fallbackText;
            }
        });
    </script>
</body>
</html>
